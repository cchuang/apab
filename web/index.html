<html>
<head>
	<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<style type="text/css">
.holder{
	margin: 0 auto;
    width: 765px;
    height:630px;
    position:relative;
}
</style>
<script>

var genList = function(handle, slideno) {
	$.getJSON( handle, {action: "ls_items"}, function( data ) { 
		//console.log(data);
		$("#options").empty();
		$.each(data, function(i, item) {
			$("<li>").append($("<a>").attr("href", handle + "?action=do&val=" + encodeURIComponent(item) + "&slideno=" + slideno)
					.text(item))
				.appendTo("#options");
		});
	});
}

$(window).load(function(){
	var ws = new WebSocket("ws://skyrim3.iis.sinica.edu.tw:5678/");
	ws.onmessage = function (event) {
		stat = JSON.parse(event.data);
		$('#slides').attr("src", stat.path);
		genList(stat.handle, stat.slideno);
	};

});

</script>
</head>
<body>
<div class="holder">
<img id="slides" width="100%", height="100%"/>
<div id="options"></div>
</div>

</body>
</html>
